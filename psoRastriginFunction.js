const globalBestArrayOf50Runs = [
  2.347493117976901, 4.125846965438225, 4.320149362558064, 2.080015885069214,
  2.3378672973375405, 1.3099424904710713, 1.5703607518840244,
  1.0071185005965546, 1.9950398051616496, 2.753294542592988, 0.5707560429383296,
  6.76552411484373, 2.40939668085986, 2.7244697983085917, 8.547836923812183,
  2.094635961412596, 3.1050594355492347, 4.380204080364723, 6.219995261795146,
  0.11030498530595878, 4.019124997749891, 2.491001916110678, 2.2849859821177763,
  3.6265652191526137, 1.05753822034435, 1.3778401454207465, 3.445962748636825,
  2.348803605912119, 4.830509848800631, 10.96068247445868, 8.525171729532769,
  1.9467045132557814, 2.7646639648885856, 4.701131838292531, 5.6214056069346405,
  2.042334810489775, 2.1844950493716446, 1.473362329368186, 1.7002813505908279,
  9.810474901585593, 2.0356420642705864, 5.854792062948286, 9.514963573421966,
  1.4665452599844269, 9.657446354002104, 2.5347497894622215,
  0.07700815289662089, 3.431420950575845, 8.421985590525953, 5.580525772366599,
];

const globalBestArrayOf50RunsConstant = [
  4.990783257166168, 3.9453544509805756, 5.8668058379161145, 2.51891710686235,
  6.3448420270933035, 11.534235018433488, 8.961868489897649, 1.3826124984498946,
  6.897477571972198, 6.893835059160643, 5.0071640417027865, 4.757162922755299,
  5.178222179941653, 2.354269198276562, 2.046621576144968, 6.409760335201689,
  1.4060179896739715, 1.7854437262343925, 2.080851041834549, 7.274197889648294,
  11.035604893984255, 6.4645726361054034, 0.015799421585757756,
  5.463768962535996, 5.118124393451381, 3.0311863066533, 2.676240635147133,
  4.21686359506219, 2.7895070250436707, 4.732509969850505, 3.467966742269425,
  3.757841057110344, 3.398988667992292, 2.2038047591894774, 1.8255791004941972,
  6.329850434835556, 3.5651684231238114, 5.0152684121811895, 2.048671456013519,
  1.0424108326678176, 2.46647407117322, 8.589455979884134, 5.221308086892515,
  2.5791662272608384, 10.777973263116682, 3.2190743592030966, 5.865761399573655,
  5.605403980817653, 3.5149789873336763, 7.174315576979136,
];
const globalBestArrayOf50RunsLinearly√üDecreasing = [
  4.032862041875841, 0.10396301986803991, 1.996345100116569, 3.3973030756603215,
  1.2914914184919333, 1.9941822890214702, 1.321723366025017, 5.14117774299976,
  3.016116154710101, 3.14305695090337, 0.8198519870875192, 2.7379949017078236,
  2.068852522926278, 6.24085826903228, 1.0133974448183078, 2.131670152700419,
  0.4701149150998223, 1.0241367070113672, 1.20337122272384, 2.007554762424448,
  2.1598049018473304, 0.6114195078446123, 1.2599925510531218, 5.048982094403293,
  1.7032437721858535, 0.005451843343140084, 1.035895855419028,
  5.254578135215462, 0.02536700063618369, 1.8971214799867102, 1.053832119050826,
  3.1030453681893064, 5.97301078006039, 1.114440146801714, 3.5791496909904055,
  4.009800702021744, 2.01017847442756, 1.149626287543601, 1.074211944517609,
  0.5005802202363938, 2.8860225456940274, 2.9858299889959845,
  1.3667348098688823, 0.0862029932365278, 1.0015279639260655,
  1.0553481418915425, 2.0525230200743376, 1.0049217330981985, 2.404881605325187,
  1.0709446967994865,
];
const globalBestArrayOf50RunsRandom = [
  (13.802738336465527,
  0.014599930811844075,
  4.984447309916161,
  5.383945121531701,
  4.425390724183369,
  2.268481881353358,
  1.1720983696266885,
  4.056704305466729,
  2.2131681938584755,
  5.004199942708983,
  1.4486916586015628,
  7.169815176982954,
  2.1954449142533665,
  5.92625034209597,
  3.4424087078486263,
  3.0094088990041143,
  0.01036880749631841,
  7.428233516699555,
  3.0177891395052043,
  1.679842393531306,
  2.103919374525292,
  7.450100274120148,
  6.712609467329875,
  2.6947088470182425,
  3.772867210499779,
  1.0946256764156992,
  1.4058105210089575,
  1.001259599707959,
  3.0151970599666793,
  3.1612648855574452,
  1.0202486970981433,
  4.021259741073884,
  10.859000711628683,
  2.287760898143249,
  5.314153557280001,
  4.561925191400935,
  3.0465335358560814,
  4.531611517989221,
  0.9961200681631315,
  1.0024714429446817,
  5.370134021152466,
  3.5136385555257057,
  3.380591498846341,
  6.197994134052424,
  5.424969192238378,
  8.550327108398937,
  9.05498948439449,
  4.664376622119882,
  2.860639050880507,
  1.1435750867126746),
];

//find the mean of the global best values

function meanCalculation(array, params) {
  let mean = 0;
  for (let i = 0; i < array.length; i++) {
    mean += array[i];
  }
  mean /= array.length;
  console.log(`mean 50runs ${params}`, mean);

  //find the standard deviation of the global best values
  let standardDeviation = 0;
  for (let i = 0; i < array.length; i++) {
    standardDeviation += (array[i] - mean) ** 2;
  }
  standardDeviation /= array.length;
  standardDeviation = Math.sqrt(standardDeviation);
  console.log(`standard deviation ${params}`, standardDeviation);

  //find the median of the global best values
  const sortedGlobalBestArray = array.sort((a, b) => a - b);
  const median =
    sortedGlobalBestArray[Math.floor(sortedGlobalBestArray.length / 2)];
  console.log(`median ${params}`, median);

  //find the min of the global best values
  const min = sortedGlobalBestArray[0];
  console.log(`min ${params}`, min);

  //find the max of the global best values
  const max = sortedGlobalBestArray[sortedGlobalBestArray.length - 1];
  console.log(`max ${params}`, max);
}

meanCalculation(globalBestArrayOf50RunsConstant, "Constant");
console.log("-----------------------------------------------------");
meanCalculation(
  globalBestArrayOf50RunsLinearly√üDecreasing,
  "Linearly Decreasing"
);
console.log("-----------------------------------------------------");
meanCalculation(globalBestArrayOf50RunsRandom, "Random");

// // mean 0.019293065836010426
// // standard deviation 0.028773823761930745
// // median 0.006138244442457856
// // min 0.000026390316246860604
// // max 0.15212834830111885

// //convergence graph-> Global best values of 100 iterations

//values used
// const dimensions = 3;
// const numberOfParticles = 10;
// const lowerLimitOfSearchSpace = -5.12;
// const upperLimitOfSearchSpace = 5.12;
// const C1 = 2; //Cognitive (ùê∂1) and social acceleration coefficients (ùê∂2) of PSO
// const C2 = 2;
// // const wmax = 0.9;
// // const wmin = 0.4;
// // const w = 0.8; //Inertia weight of PSO (ùë§)
// const maxIterations = 100;

// const arrayOf100 = [
//   1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,
//   23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41,
//   42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60,
//   61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79,
//   80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,
//   99, 100,
// ];

// function fitnessFunction(x) {
//   const n = x.length;
//   let result = 10 * n;
//   for (let i = 0; i < n; i++) {
//     result += x[i] ** 2 - 10 * Math.cos(2 * Math.PI * x[i]);
//   }
//   return result;
// }

// function initializeParticles(
//   dimensions,
//   lowerLimitOfSearchSpace,
//   upperLimitOfSearchSpace
// ) {
//   const particle = [];
//   for (let i = 0; i < dimensions; i++) {
//     // Initialize each element of the particle randomly within the specified range
//     const randomValue =
//       lowerLimitOfSearchSpace +
//       Math.random() * (upperLimitOfSearchSpace - lowerLimitOfSearchSpace);
//     particle.push(randomValue);
//   }
//   return particle;
// }

// function PSO(
//   dimensions,
//   numberOfParticles,
//   lowerLimitOfSearchSpace,
//   upperLimitOfSearchSpace,
//   C1,
//   C2,
//   wNum,
//   maxIterations
// ) {
//   const globalBestArray = [];
//   let globalBest = {
//     position: [],
//     value: Infinity,
//   };

//   const particles = [];

//   // Initialize particles
//   for (let i = 0; i < numberOfParticles; i++) {
//     const particle = {
//       position: initializeParticles(
//         dimensions,
//         lowerLimitOfSearchSpace,
//         upperLimitOfSearchSpace
//       ),
//       velocity: Array(dimensions).fill(0),
//       personalBest: {
//         position: [],
//         value: Infinity,
//       },
//     };

//     // Calculate fitness value for the initial position
//     const fitnessValue = fitnessFunction(particle.position);

//     // Initialize personal best
//     particle.personalBest.position = [...particle.position];
//     particle.personalBest.value = fitnessValue;

//     // Update global best if necessary
//     if (fitnessValue < globalBest.value) {
//       globalBest.position = [...particle.position];
//       globalBest.value = fitnessValue;
//     }

//     particles.push(particle);
//   }

//   // PSO main loop
//   let iteration = 0;
//   while (iteration < maxIterations) {
//     // Linearly Decreasing Inertia Weight
//     // const w = 0.9 - ((0.9 - 0.4) * iteration) / maxIterations;

//     // Random Inertia Weight
//     // const w = 0.5 + Math.random() / 2;

//     let w;

//     if (wNum === 0) {
//       w = 0.8;
//     } else if (wNum === 1) {
//       w = 0.9 - ((0.9 - 0.4) * iteration) / maxIterations;
//     } else {
//       w = 0.5 + Math.random() / 2;
//     }

//     for (let i = 0; i < numberOfParticles; i++) {
//       const particle = particles[i];

//       // Calculate velocity using the PSO equations
//       for (let j = 0; j < dimensions; j++) {
//         const r1 = Math.random();
//         const r2 = Math.random();

//         const cognitiveComponent =
//           C1 * r1 * (particle.personalBest.position[j] - particle.position[j]);
//         const socialComponent =
//           C2 * r2 * (globalBest.position[j] - particle.position[j]);

//         particle.velocity[j] =
//           w * particle.velocity[j] + cognitiveComponent + socialComponent;
//       }

//       // Update particle position
//       for (let j = 0; j < dimensions; j++) {
//         particle.position[j] += particle.velocity[j];
//       }

//       // Calculate fitness value for the new position
//       const newFitnessValue = fitnessFunction(particle.position);

//       // Update personal best if necessary
//       if (newFitnessValue < particle.personalBest.value) {
//         particle.personalBest.position = [...particle.position];
//         particle.personalBest.value = newFitnessValue;
//       }

//       // Update global best if necessary
//       if (newFitnessValue < globalBest.value) {
//         globalBest.position = [...particle.position];
//         globalBest.value = newFitnessValue;
//       }
//     }
//     globalBestArray.push({ ...globalBest });

//     iteration++;
//   }

//   return { globalBest, globalBestArray };
// }

// const resultConstantWeight = PSO(
//   dimensions,
//   numberOfParticles,
//   lowerLimitOfSearchSpace,
//   upperLimitOfSearchSpace,
//   C1,
//   C2,
//   0,
//   maxIterations
// );

// const globalBestArrayOf100IterationsConstantWeight =
//   resultConstantWeight.globalBestArray.map((x) => x.value);

// const resultLinearlyDecreasing = PSO(
//   dimensions,
//   numberOfParticles,
//   lowerLimitOfSearchSpace,
//   upperLimitOfSearchSpace,
//   C1,
//   C2,
//   1,
//   maxIterations
// );

// const globalBestArrayOf100IterationsLinearlYDecreasing =
//   resultLinearlyDecreasing.globalBestArray.map((x) => x.value);

// const resultRandomWeight = PSO(
//   dimensions,
//   numberOfParticles,
//   lowerLimitOfSearchSpace,
//   upperLimitOfSearchSpace,
//   C1,
//   C2,
//   2,
//   maxIterations
// );

// const globalBestArrayOf100IterationsRandomWeight =
//   resultRandomWeight.globalBestArray.map((x) => x.value);

// const xValues = [...arrayOf100];

// new Chart("myChart", {
//   type: "line",
//   data: {
//     labels: xValues,
//     datasets: [
//       {
//         data: [...globalBestArrayOf100IterationsConstantWeight],
//         borderColor: "red",
//         fill: false,
//       },
//       {
//         data: [...globalBestArrayOf100IterationsLinearlYDecreasing],
//         borderColor: "green",
//         fill: false,
//       },
//       {
//         data: [...globalBestArrayOf100IterationsRandomWeight],
//         borderColor: "blue",
//         fill: false,
//       },
//     ],
//   },
//   options: {
//     legend: { display: false },
//   },
// });
